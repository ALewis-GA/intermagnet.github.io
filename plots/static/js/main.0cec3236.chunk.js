(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(t,a,e){t.exports=e(70)},42:function(t,a,e){},44:function(t,a,e){},70:function(t,a,e){"use strict";e.r(a);var n=e(0),r=e.n(n),i=e(29),o=e.n(i),l=(e(42),e(72)),c=e(73),u=e(32),s=e(7),d=e.n(s),h=(e(44),e(74)),m=function(t){var a=t.station,e=t.setStation,n=t.sampling,i=t.setSampling,o=t.dataType,l=t.setDataType,c=t.date,s=t.setDate;return r.a.createElement(h.a,null,r.a.createElement(h.a.Row,null,r.a.createElement(u.a,null,r.a.createElement(h.a.Group,{controlId:"formStation"},r.a.createElement(h.a.Label,null,"Station"),r.a.createElement(h.a.Control,{type:"text",placeholder:"IAGA code",value:a,onChange:function(t){return e(t.target.value)}}))),r.a.createElement(u.a,null,r.a.createElement(h.a.Group,{controlId:"formSampling"},r.a.createElement(h.a.Label,null,"Sampling Period"),r.a.createElement(h.a.Control,{as:"select",value:n,onChange:function(t){return i(parseFloat(t.target.value))}},r.a.createElement("option",{value:"60"},"minute"),r.a.createElement("option",{value:"1"},"second")))),r.a.createElement(u.a,null,r.a.createElement(h.a.Group,{controlId:"formDataType"},r.a.createElement(h.a.Label,null,"Data Type"),r.a.createElement(h.a.Control,{as:"select",value:o,onChange:function(t){return l(t.target.value)}},r.a.createElement("option",null,"all"),r.a.createElement("option",null,"definitive"),r.a.createElement("option",null,"quasi-definitive"),r.a.createElement("option",null,"provisional"),r.a.createElement("option",null,"variation")))),r.a.createElement(u.a,null,r.a.createElement(h.a.Group,{controlId:"formDate"},r.a.createElement(h.a.Label,null,"Date"),r.a.createElement(h.a.Control,{type:"date",value:c.format("YYYY-MM-DD"),onChange:function(t){return s(d()(t.target.value))}})))))},p=e(13),f=e(33),y=e.n(f),E=function(t){var a=t.reduce(function(t,a){return null===a?t:t+a},0),e=t.reduce(function(t,a){return null===a?t:t+1},0);return 0===e?null:a/e},_=function(t,a){return t.map(function(t){return null===t?null:t-a})},g=function(t){var a=t.data,e=E(a.x),n=_(a.x,e),i=Math.max.apply(Math,Object(p.a)(n.map(Math.abs))),o=E(a.y),l=_(a.y,o),c=Math.max.apply(Math,Object(p.a)(l.map(Math.abs))),u=E(a.z),s=_(a.z,u),d=Math.max.apply(Math,Object(p.a)(s.map(Math.abs))),h=10*Math.ceil(Math.max(i,c,d)/10),m="".concat(a.meta["Station Name"]," (").concat(a.meta["IAGA CODE"],")"),f={title:"nT",zeroline:!1,showdividers:!1,range:[-h,h],fixedrange:!0};return r.a.createElement(y.a,{style:{width:"100%",height:600},data:[{x:a.datetime,y:n,type:"scatter",mode:"line",name:"X (".concat(e.toFixed(2)," nT)")},{x:a.datetime,y:l,xaxis:"x",yaxis:"y2",type:"scatter",mode:"line",name:"Y (".concat(o.toFixed(2)," nT)")},{x:a.datetime,y:s,xaxis:"x",yaxis:"y3",type:"scatter",mode:"line",name:"Z (".concat(u.toFixed(2)," nT)")}],layout:{yaxis:f,yaxis2:f,yaxis3:f,title:m,grid:{rows:3,columns:1,pattern:"independant"}}})},b=e(71),v=function(t){var a=t.data,e=Object.keys(a.meta).map(function(t){return r.a.createElement("tr",{key:t},r.a.createElement("th",null,t),r.a.createElement("td",null,a.meta[t]))});return r.a.createElement("details",null,r.a.createElement("summary",null,"Additional Details"),r.a.createElement(b.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tbody",null,e)))},w=e(15),T=e.n(w),x=e(34),O=e(17),S=e(6),j=e(35),M=e.n(j),A=e(36),D=e(12),I=e(18),k=e(10),C=e(16),F=e(19),R=function(t){function a(){return Object(D.a)(this,a),Object(I.a)(this,Object(k.a)(a).apply(this,arguments))}return Object(C.a)(a,t),a}(Object(F.a)(Error)),z=function(t){function a(){return Object(D.a)(this,a),Object(I.a)(this,Object(k.a)(a).apply(this,arguments))}return Object(C.a)(a,t),a}(Object(F.a)(Error)),L=function(t,a){return Math.atan2(a,t)*(180/Math.PI)*60},Y=function(t,a){return Math.sqrt(Math.pow(t,2)+Math.pow(a,2))},G=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(D.a)(this,t),this._meta=a,this._data=e}return Object(A.a)(t,[{key:"isEmpty",get:function(){return!Object.keys(this._meta).length}},{key:"meta",get:function(){return this._meta}},{key:"data",get:function(){return this._data}},{key:"datetime",get:function(){return this._data.datetime}},{key:"x",get:function(){var t=this;if("x"in this._data)return this._data.x;if("h"in this._data&&"d"in this._data)return this._data.h.map(function(a,e){return null!==a&&null!==t._data.d[e]?(n=a,r=t._data.d[e],n*Math.cos(r*(Math.PI/180/60))):null;var n,r});throw new z("Require x or (h and d) components")}},{key:"y",get:function(){var t=this;if("y"in this._data)return this._data.y;if("h"in this._data&&"d"in this._data)return this._data.h.map(function(a,e){return null!==a&&null!==t._data.d[e]?(n=a,r=t._data.d[e],n*Math.sin(r*(Math.PI/180/60))):null;var n,r});throw new z("Require y or (h and d) components")}},{key:"z",get:function(){if("z"in this._data)return this._data.z;throw new z("Require z component")}},{key:"f",get:function(){if("f"in this._data)return this._data.f;throw new z("Require f component")}},{key:"d",get:function(){var t=this;if("d"in this._data)return this._data.d;if("x"in this._data&&"y"in this._data)return this._data.x.map(function(a,e){return null!==a&&null!==t._data.y[e]?(n=a,r=t._data.y[e],Math.atan2(r,n)*(180/Math.PI)*60):null;var n,r});throw new z("Require d or (x and y) components")}},{key:"h",get:function(){var t=this;if("h"in this._data)return this._data.h;if("x"in this._data&&"y"in this._data)return this._data.h.map(function(a,e){return null!==a&&null!==t._data.y[e]?Y(a,t._data.y[e]):null});throw new z("Require h or (x and y) components")}},{key:"i",get:function(){var t=this;if("i"in this._data)return this._data.i;if("z"in this._data&&"h"in this._data)return this._data.h.map(function(a,e){return null!==a&&null!==t._data.z[e]?L(a,t._data.z[e]):null});if("z"in this._data&&"x"in this._data&&"y"in this._data)return this._data.x.map(function(a,e){return null!==a&&null!==t._data.y[e]&&null!==t._data.z[e]?L(Y(a,t._data.y[e]),t._data.z[e]):null});throw new z("Require i or (z and h) or (z, x, and y) components")}}]),t}(),q={parseIAGA2002:function(t){var a=t.split("\n"),e=[],n={datetime:[]},r={};return a.forEach(function(t){if(-1!==t.search(/^DATE /))t=t.split(/[ ]+/),e=[3,4,5,6].map(function(a){var e=t[a].substr(-1).toLowerCase();return n[e]=[],e});else if(-1!==t.search(/^[0-9]{4}-[0-9]{2}-[0-9]{2}/)){if(4!==e.length)throw new R("Missing elements in header");t=t.split(/[ ]+/),n.datetime.push(t[0]+"T"+t[1]),e.forEach(function(a,e){var r=parseFloat(t[e+3]);n[a].push(r>8e4?null:r)})}else-1!==t.search(/^ [A-Z]/)&&(r[t.substr(0,22).trim()]=t.substr(23,t.length-23-2).trim())}),new G(r,n)},GeomagneticData:G},P=function(t,a){switch(a.type){case"FETCH_INIT":return Object(S.a)({},t,{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(S.a)({},t,{isLoading:!1,isError:!1,data:a.payload});case"FETCH_FAILURE":return Object(S.a)({},t,{isLoading:!1,isError:!0});default:throw new Error}},N=function(t){var a=t.source,e=t.station,n=t.sampling,r=t.dataType,i=t.format,o=t.date;switch(e=e.toLowerCase(),n){case 60:n="minute";break;case 1:n="second";break;default:throw new Error("Unknown sampling period")}o=o instanceof d.a?o:d()(o);var l="".concat(e).concat(o.format("YYYYMMDD")).concat(r.substr(0,1)).concat(n.substr(0,3),".").concat(n.substr(0,3));return"".concat(a,"/").concat(n,"/").concat(r,"/").concat(i,"/").concat(o.format("YYYY/MM"),"/").concat(l)},U=function(t,a){switch(a.type){case"SET_SOURCE":return Object(S.a)({},t,{source:a.payload});case"SET_STATION":return Object(S.a)({},t,{station:a.payload});case"SET_SAMPLING":return Object(S.a)({},t,{sampling:a.payload});case"SET_DATATYPE":return Object(S.a)({},t,{dataType:a.payload});case"SET_FORMAT":return Object(S.a)({},t,{format:a.payload});case"SET_DATE":return Object(S.a)({},t,{date:a.payload});default:throw new Error}},H=function(t){var a=Object(n.useReducer)(U,Object.assign({source:"",station:"",sampling:60,dataType:"variation",format:"IAGA2002",date:d()()},t)),e=Object(O.a)(a,2),r=e[0],i=e[1],o=Object(n.useReducer)(P,{isLoading:!1,isError:!1,data:new q.GeomagneticData}),l=Object(O.a)(o,2),c=l[0],u=l[1];Object(n.useEffect)(function(){var t=!1;return function(){var a=Object(x.a)(T.a.mark(function a(){var e,n;return T.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u({type:"FETCH_INIT"}),a.prev=1,e=N(r),a.next=5,M()(e);case 5:n=a.sent,t||u({type:"FETCH_SUCCESS",payload:q.parseIAGA2002(n.data)}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),t||u({type:"FETCH_FAILURE"});case 12:case"end":return a.stop()}},a,null,[[1,9]])}));return function(){return a.apply(this,arguments)}}()(),function(){t=!0}},[r]);var s={setSource:function(t){return i({type:"SET_SOURCE",payload:t})},setStation:function(t){return i({type:"SET_STATION",payload:t})},setSampling:function(t){return i({type:"SET_SAMPLING",payload:t})},setDataType:function(t){return i({type:"SET_DATATYPE",payload:t})},setFormat:function(t){return i({type:"SET_FORMAT",payload:t})},setDate:function(t){return i({type:"SET_DATE",payload:t})}};return Object(S.a)({},c,r,s)},B=function(){var t=H({source:"http://origin1.intermagnet.org/data/",station:"ott",date:d()()}),a=t.data,e=t.station,n=t.setStation,i=t.sampling,o=t.setSampling,s=t.dataType,h=t.setDataType,p=t.date,f=t.setDate;return r.a.createElement(l.a,null,r.a.createElement(c.a,null,r.a.createElement(u.a,null,r.a.createElement(m,{station:e,setStation:n,sampling:i,setSampling:o,dataType:s,setDataType:h,date:p,setDate:f}))),r.a.createElement(c.a,null,r.a.createElement(u.a,null,a.isEmpty?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{data:a}),r.a.createElement(v,{data:a})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.0cec3236.chunk.js.map