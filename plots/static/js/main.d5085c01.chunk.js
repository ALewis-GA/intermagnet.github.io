(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(t,e,a){t.exports=a(70)},42:function(t,e,a){},44:function(t,e,a){},70:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),c=(a(42),a(72)),u=a(73),l=a(32),s=a(7),d=a.n(s),m=(a(44),a(74)),h=function(t){var e=t.station,a=t.setStation,n=t.sampling,i=t.setSampling,o=t.dataType,c=t.setDataType,u=t.date,s=t.setDate;return r.a.createElement(m.a,null,r.a.createElement(m.a.Row,null,r.a.createElement(l.a,null,r.a.createElement(m.a.Group,{controlId:"formStation"},r.a.createElement(m.a.Label,null,"Station"),r.a.createElement(m.a.Control,{type:"text",placeholder:"IAGA code",value:e,onChange:function(t){return a(t.target.value)}}))),r.a.createElement(l.a,null,r.a.createElement(m.a.Group,{controlId:"formSampling"},r.a.createElement(m.a.Label,null,"Sampling Period"),r.a.createElement(m.a.Control,{as:"select",value:n,onChange:function(t){return i(parseFloat(t.target.value))}},r.a.createElement("option",{value:"60"},"minute"),r.a.createElement("option",{value:"1"},"second")))),r.a.createElement(l.a,null,r.a.createElement(m.a.Group,{controlId:"formDataType"},r.a.createElement(m.a.Label,null,"Data Type"),r.a.createElement(m.a.Control,{as:"select",value:o,onChange:function(t){return c(t.target.value)}},r.a.createElement("option",null,"all"),r.a.createElement("option",null,"definitive"),r.a.createElement("option",null,"quasi-definitive"),r.a.createElement("option",null,"provisional"),r.a.createElement("option",null,"variation")))),r.a.createElement(l.a,null,r.a.createElement(m.a.Group,{controlId:"formDate"},r.a.createElement(m.a.Label,null,"Date"),r.a.createElement(m.a.Control,{type:"date",value:u.format("YYYY-MM-DD"),onChange:function(t){return s(d()(t.target.value))}})))))},p=a(13),f=a(33),y=a.n(f),E=function(t){var e=t.reduce(function(t,e){return null===e?t:t+e},0),a=t.reduce(function(t,e){return null===e?t:t+1},0);return 0===a?null:e/a},_=function(t,e){return t.map(function(t){return null===t?null:t-e})},g=function(t){var e=t.data,a=E(e.x),n=_(e.x,a),i=Math.max.apply(Math,Object(p.a)(n.map(Math.abs))),o=E(e.y),c=_(e.y,o),u=Math.max.apply(Math,Object(p.a)(c.map(Math.abs))),l=E(e.z),s=_(e.z,l),d=Math.max.apply(Math,Object(p.a)(s.map(Math.abs))),m=10*Math.ceil(Math.max(i,u,d)/10),h="".concat(e.meta["Station Name"]," (").concat(e.meta["IAGA CODE"],")"),f={title:"nT",zeroline:!1,showdividers:!1,range:[-m,m],fixedrange:!0};return r.a.createElement(y.a,{style:{width:"100%",height:600},data:[{x:e.datetime,y:n,type:"scatter",mode:"line",name:"X (".concat(a.toFixed(2)," nT)")},{x:e.datetime,y:c,xaxis:"x",yaxis:"y2",type:"scatter",mode:"line",name:"Y (".concat(o.toFixed(2)," nT)")},{x:e.datetime,y:s,xaxis:"x",yaxis:"y3",type:"scatter",mode:"line",name:"Z (".concat(l.toFixed(2)," nT)")}],layout:{yaxis:f,yaxis2:f,yaxis3:f,title:h,grid:{rows:3,columns:1,pattern:"independant"}}})},b=a(71),v=function(t){var e=t.data,a=Object.keys(e.meta).map(function(t){return r.a.createElement("tr",{key:t},r.a.createElement("th",null,t),r.a.createElement("td",null,e.meta[t]))});return r.a.createElement("details",null,r.a.createElement("summary",null,"Additional Details"),r.a.createElement(b.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tbody",null,a)))},w=a(15),T=a.n(w),x=a(34),O=a(17),S=a(6),j=a(35),M=a.n(j),A=a(36),D=a(12),k=a(18),C=a(10),I=a(16),F=a(19),R=function(t){function e(){return Object(D.a)(this,e),Object(k.a)(this,Object(C.a)(e).apply(this,arguments))}return Object(I.a)(e,t),e}(Object(F.a)(Error)),L=function(t){function e(){return Object(D.a)(this,e),Object(k.a)(this,Object(C.a)(e).apply(this,arguments))}return Object(I.a)(e,t),e}(Object(F.a)(Error)),Y=function(t,e){return Math.atan2(e,t)},z=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(D.a)(this,t),this._meta=e,this._data=a}return Object(A.a)(t,[{key:"isEmpty",get:function(){return!Object.keys(this._meta).length}},{key:"meta",get:function(){return this._meta}},{key:"data",get:function(){return this._data}},{key:"datetime",get:function(){return this._data.datetime}},{key:"x",get:function(){var t=this;if("x"in this._data)return this._data.x;if("h"in this._data&&"d"in this._data)return this._data.h.map(function(e,a){return n=e,r=t._data.d[a],n*Math.cos(r);var n,r});throw new L("Require x or (h and d) components")}},{key:"y",get:function(){var t=this;if("y"in this._data)return this._data.y;if("h"in this._data&&"d"in this._data)return this._data.h.map(function(e,a){return n=e,r=t._data.d[a],n*Math.sin(r);var n,r});throw new L("Require y or (h and d) components")}},{key:"z",get:function(){if("z"in this._data)return this._data.z;throw new L("Require z component")}},{key:"f",get:function(){if("f"in this._data)return this._data.f;throw new L("Require f component")}},{key:"d",get:function(){var t=this;if("d"in this._data)return this._data.d;if("x"in this._data&&"y"in this._data)return this._data.x.map(function(e,a){return n=e,r=t._data.y[a],Math.atan2(r,n);var n,r});throw new L("Require d or (x and y) components")}},{key:"h",get:function(){var t=this;if("h"in this._data)return this._data.h;if("x"in this._data&&"y"in this._data)return this._data.h.map(function(e,a){return z(e,t._data.y[a])});throw new L("Require h or (x and y) components")}},{key:"i",get:function(){var t=this;if("i"in this._data)return this._data.i;if("z"in this._data&&"h"in this._data)return this._data.h.map(function(e,a){return Y(e,t._data.z[a])});if("z"in this._data&&"x"in this._data&&"y"in this._data)return this._data.x.map(function(e,a){return Y(z(e,t._data.y[a]),t._data.z[a])});throw new L("Require i or (z and h) or (z, x, and y) components")}}]),t}(),q={parseIAGA2002:function(t){var e=t.split("\n"),a=[],n={datetime:[]},r={};return e.forEach(function(t){if(-1!==t.search(/^DATE /))t=t.split(/[ ]+/),a=[3,4,5,6].map(function(e){var a=t[e].substr(-1).toLowerCase();return n[a]=[],a});else if(-1!==t.search(/^[0-9]{4}-[0-9]{2}-[0-9]{2}/)){if(4!==a.length)throw new R("Missing elements in header");t=t.split(/[ ]+/),n.datetime.push(t[0]+"T"+t[1]),a.forEach(function(e,a){var r=parseFloat(t[a+3]);n[e].push(r>8e4?null:r)})}else-1!==t.search(/^ [A-Z]/)&&(r[t.substr(0,22).trim()]=t.substr(23,t.length-23-2).trim())}),new G(r,n)},GeomagneticData:G},N=function(t,e){switch(e.type){case"FETCH_INIT":return Object(S.a)({},t,{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(S.a)({},t,{isLoading:!1,isError:!1,data:e.payload});case"FETCH_FAILURE":return Object(S.a)({},t,{isLoading:!1,isError:!0});default:throw new Error}},U=function(t){var e=t.source,a=t.station,n=t.sampling,r=t.dataType,i=t.format,o=t.date;switch(a=a.toLowerCase(),n){case 60:n="minute";break;case 1:n="second";break;default:throw new Error("Unknown sampling period")}o=o instanceof d.a?o:d()(o);var c="".concat(a).concat(o.format("YYYYMMDD")).concat(r.substr(0,1)).concat(n.substr(0,3),".").concat(n.substr(0,3));return"".concat(e,"/").concat(n,"/").concat(r,"/").concat(i,"/").concat(o.format("YYYY/MM"),"/").concat(c)},H=function(t,e){switch(e.type){case"SET_SOURCE":return Object(S.a)({},t,{source:e.payload});case"SET_STATION":return Object(S.a)({},t,{station:e.payload});case"SET_SAMPLING":return Object(S.a)({},t,{sampling:e.payload});case"SET_DATATYPE":return Object(S.a)({},t,{dataType:e.payload});case"SET_FORMAT":return Object(S.a)({},t,{format:e.payload});case"SET_DATE":return Object(S.a)({},t,{date:e.payload});default:throw new Error}},P=function(t){var e=Object(n.useReducer)(H,Object.assign({source:"",station:"",sampling:60,dataType:"variation",format:"IAGA2002",date:d()()},t)),a=Object(O.a)(e,2),r=a[0],i=a[1],o=Object(n.useReducer)(N,{isLoading:!1,isError:!1,data:new q.GeomagneticData}),c=Object(O.a)(o,2),u=c[0],l=c[1];Object(n.useEffect)(function(){var t=!1;return function(){var e=Object(x.a)(T.a.mark(function e(){var a,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"FETCH_INIT"}),e.prev=1,a=U(r),e.next=5,M()(a);case 5:n=e.sent,t||l({type:"FETCH_SUCCESS",payload:q.parseIAGA2002(n.data)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t||l({type:"FETCH_FAILURE"});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(){return e.apply(this,arguments)}}()(),function(){t=!0}},[r]);var s={setSource:function(t){return i({type:"SET_SOURCE",payload:t})},setStation:function(t){return i({type:"SET_STATION",payload:t})},setSampling:function(t){return i({type:"SET_SAMPLING",payload:t})},setDataType:function(t){return i({type:"SET_DATATYPE",payload:t})},setFormat:function(t){return i({type:"SET_FORMAT",payload:t})},setDate:function(t){return i({type:"SET_DATE",payload:t})}};return Object(S.a)({},u,r,s)},B=function(){var t=P({source:"http://origin1.intermagnet.org/data/",station:"ott",date:d()()}),e=t.data,a=t.station,n=t.setStation,i=t.sampling,o=t.setSampling,s=t.dataType,m=t.setDataType,p=t.date,f=t.setDate;return r.a.createElement(c.a,null,r.a.createElement(u.a,null,r.a.createElement(l.a,null,r.a.createElement(h,{station:a,setStation:n,sampling:i,setSampling:o,dataType:s,setDataType:m,date:p,setDate:f}))),r.a.createElement(u.a,null,r.a.createElement(l.a,null,e.isEmpty?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{data:e}),r.a.createElement(v,{data:e})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.d5085c01.chunk.js.map